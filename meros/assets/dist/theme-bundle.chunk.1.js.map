{"version":3,"sources":["webpack:///./assets/js/theme/wishlist.js"],"names":["WishList","options","template","wishlistDeleteConfirm","$","on","event","confirmed","confirm","context","wishlistDelete","preventDefault","registerAddWishListValidation","$addWishlistForm","addWishlistValidator","nod","submit","add","selector","validate","cb","val","result","length","errorMessage","performCheck","areAll","wishListHandler","wishListUrl","currentTarget","href","modal","defaultModal","open","api","getPage","err","content","updateContent","wrap","$wishlistForm","$content","loaded","next","$addWishListForm"],"mappings":";;;;;;;;;;;;;;;;;8yBAQqBA,S,yDACjB,mBAAc,0EACV,uBADU,EAGV,MAAKC,OAAL,CAAe,CACXC,SAAU,sBADC,CAAf,CAHU,YAMb,CAED;;0BAGAC,qB,iCAAwB,iBACpB,8CAAAC,CAAE,MAAF,EAAUC,EAAV,CAAa,OAAb,CAAsB,wBAAtB,CAAgD,SAACC,KAAD,CAAW,CACvD,GAAMC,WAAYC,QAAQ,OAAKC,OAAL,CAAaC,cAArB,CAAlB,CAEA,GAAIH,SAAJ,CAAe,CACX,MAAO,KACV,CAEDD,MAAMK,cAAN,EACH,CARD,CASH,C,oBAEDC,6B,wCAA8BC,gB,CAAkB,iBAC5C,KAAKC,oBAAL,CAA4B,mFAAAC,CAAI,CAC5BC,OAAQ,qCADoB,CAAJ,CAA5B,CAIA,KAAKF,oBAAL,CAA0BG,GAA1B,CAA8B,CAC1B,CACIC,SAAU,2CADd,CAEIC,SAAU,kBAACC,EAAD,CAAKC,GAAL,CAAa,CACnB,GAAMC,QAASD,IAAIE,MAAJ,CAAa,CAA5B,CAEAH,GAAGE,MAAH,CACH,CANL,CAOIE,aAAc,iCAPlB,CAD0B,CAA9B,EAYAX,iBAAiBG,MAAjB,CAAwB,SAACV,KAAD,CAAW,CAC/B,OAAKQ,oBAAL,CAA0BW,YAA1B,GAEA,GAAI,OAAKX,oBAAL,CAA0BY,MAA1B,CAAiC,OAAjC,CAAJ,CAA+C,CAC3C,MACH,CAEDpB,MAAMK,cAAN,EACH,CARD,CASH,C,oBAEDgB,e,2BAAkB,iBACd,8CAAAvB,CAAE,MAAF,EAAUC,EAAV,CAAa,OAAb,CAAsB,iBAAtB,CAAyC,SAACC,KAAD,CAAW,CAChD,GAAMsB,aAActB,MAAMuB,aAAN,CAAoBC,IAAxC,CACA,GAAMC,OAAQ,0FAAAC,EAAd,CAEA1B,MAAMK,cAAN,GAEAoB,MAAME,IAAN,GAEA,uEAAAC,CAAIC,OAAJ,CAAYP,WAAZ,CAAyB,OAAK3B,OAA9B,CAAuC,SAACmC,GAAD,CAAMC,OAAN,CAAkB,CACrD,GAAID,GAAJ,CAAS,CACL,MAAOL,OAAMO,aAAN,CAAoBF,GAApB,CACV,CAEDL,MAAMO,aAAN,CAAoBD,OAApB,CAA6B,CAAEE,KAAM,IAAR,CAA7B,EAEA,GAAMC,eAAgB,8CAAApC,CAAE,gBAAF,CAAoB2B,MAAMU,QAA1B,CAAtB,CAEA,OAAK7B,6BAAL,CAAmC4B,aAAnC,CACH,CAVD,CAWH,CAnBD,CAoBH,C,oBAEDE,M,iBAAOC,I,CAAM,CACT,GAAMC,kBAAmB,8CAAAxC,CAAE,gBAAF,CAAzB,CAEA,GAAIwC,iBAAiBrB,MAArB,CAA6B,CACzB,KAAKX,6BAAL,CAAmCgC,gBAAnC,CACH,CAED,KAAKzC,qBAAL,GACA,KAAKwB,eAAL,GAEAgB,MACH,C,kBAtFiC,8D,iEAAjB3C,Q","file":"theme-bundle.chunk.1.js","sourcesContent":["import $ from 'jquery';\r\nimport 'foundation-sites/js/foundation/foundation';\r\nimport 'foundation-sites/js/foundation/foundation.reveal';\r\nimport nod from './common/nod';\r\nimport PageManager from './page-manager';\r\nimport { api } from '@bigcommerce/stencil-utils';\r\nimport { defaultModal } from './global/modal';\r\n\r\nexport default class WishList extends PageManager {\r\n    constructor() {\r\n        super();\r\n\r\n        this.options = {\r\n            template: 'account/add-wishlist',\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Creates a confirm box before deleting all wish lists\r\n     */\r\n    wishlistDeleteConfirm() {\r\n        $('body').on('click', '[data-wishlist-delete]', (event) => {\r\n            const confirmed = confirm(this.context.wishlistDelete);\r\n\r\n            if (confirmed) {\r\n                return true;\r\n            }\r\n\r\n            event.preventDefault();\r\n        });\r\n    }\r\n\r\n    registerAddWishListValidation($addWishlistForm) {\r\n        this.addWishlistValidator = nod({\r\n            submit: '.wishlist-form input[type=\"submit\"]',\r\n        });\r\n\r\n        this.addWishlistValidator.add([\r\n            {\r\n                selector: '.wishlist-form input[name=\"wishlistname\"]',\r\n                validate: (cb, val) => {\r\n                    const result = val.length > 0;\r\n\r\n                    cb(result);\r\n                },\r\n                errorMessage: 'You must enter a wishlist name.',\r\n            },\r\n        ]);\r\n\r\n        $addWishlistForm.submit((event) => {\r\n            this.addWishlistValidator.performCheck();\r\n\r\n            if (this.addWishlistValidator.areAll('valid')) {\r\n                return;\r\n            }\r\n\r\n            event.preventDefault();\r\n        });\r\n    }\r\n\r\n    wishListHandler() {\r\n        $('body').on('click', '[data-wishlist]', (event) => {\r\n            const wishListUrl = event.currentTarget.href;\r\n            const modal = defaultModal();\r\n\r\n            event.preventDefault();\r\n\r\n            modal.open();\r\n\r\n            api.getPage(wishListUrl, this.options, (err, content) => {\r\n                if (err) {\r\n                    return modal.updateContent(err);\r\n                }\r\n\r\n                modal.updateContent(content, { wrap: true });\r\n\r\n                const $wishlistForm = $('.wishlist-form', modal.$content);\r\n\r\n                this.registerAddWishListValidation($wishlistForm);\r\n            });\r\n        });\r\n    }\r\n\r\n    loaded(next) {\r\n        const $addWishListForm = $('.wishlist-form');\r\n\r\n        if ($addWishListForm.length) {\r\n            this.registerAddWishListValidation($addWishListForm);\r\n        }\r\n\r\n        this.wishlistDeleteConfirm();\r\n        this.wishListHandler();\r\n\r\n        next();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/wishlist.js"],"sourceRoot":""}